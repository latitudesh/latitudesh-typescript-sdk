/*
 * Code generated by Speakeasy (https://speakeasy.com). DO NOT EDIT.
 */

import { plansGet } from "../funcs/plansGet.js";
import { plansGetBandwidth } from "../funcs/plansGetBandwidth.js";
import { plansGetContainersPlan } from "../funcs/plansGetContainersPlan.js";
import { plansList } from "../funcs/plansList.js";
import { plansListStorage } from "../funcs/plansListStorage.js";
import { plansUpdateBandwidth } from "../funcs/plansUpdateBandwidth.js";
import { ClientSDK, RequestOptions } from "../lib/sdks.js";
import * as models from "../models/index.js";
import * as operations from "../models/operations/index.js";
import { unwrapAsync } from "../types/fp.js";
import { PageIterator, unwrapResultIterator } from "../types/operations.js";
import { Vm } from "./vm.js";

export class Plans extends ClientSDK {
  private _vm?: Vm;
  get vm(): Vm {
    return (this._vm ??= new Vm(this._options));
  }

  /**
   * List all Plans
   *
   * @remarks
   * Lists all plans. Availability by region is included in `attributes.regions.locations.available[*]` node for a given plan.
   */
  async list(
    request?: operations.GetPlansRequest | undefined,
    options?: RequestOptions,
  ): Promise<operations.GetPlansResponse> {
    return unwrapAsync(plansList(
      this,
      request,
      options,
    ));
  }

  /**
   * Retrieve a Plan
   */
  async get(
    request: operations.GetPlanRequest,
    options?: RequestOptions,
  ): Promise<models.Plan> {
    return unwrapAsync(plansGet(
      this,
      request,
      options,
    ));
  }

  /**
   * List all bandwidth plans
   *
   * @remarks
   * Lists all bandwidth plans.
   */
  async getBandwidth(
    request?: operations.GetBandwidthPlansRequest | undefined,
    options?: RequestOptions,
  ): Promise<
    PageIterator<operations.GetBandwidthPlansResponse, { page: number }>
  > {
    return unwrapResultIterator(plansGetBandwidth(
      this,
      request,
      options,
    ));
  }

  /**
   * Buy or remove bandwidth packages
   *
   * @remarks
   * Allows to increase or decrease bandwidth packages. Only admins and owners can request.
   */
  async updateBandwidth(
    request: operations.UpdatePlansBandwidthRequest,
    options?: RequestOptions,
  ): Promise<models.BandwidthPackages> {
    return unwrapAsync(plansUpdateBandwidth(
      this,
      request,
      options,
    ));
  }

  /**
   * Retrieve container plan
   *
   * @remarks
   * Retrieve a container plan.
   */
  async getContainersPlan(
    request: operations.GetContainersPlanRequest,
    options?: RequestOptions,
  ): Promise<models.ContainerPlanData> {
    return unwrapAsync(plansGetContainersPlan(
      this,
      request,
      options,
    ));
  }

  /**
   * List all Storage Plans
   */
  async listStorage(
    options?: RequestOptions,
  ): Promise<models.StoragePlans> {
    return unwrapAsync(plansListStorage(
      this,
      options,
    ));
  }
}
